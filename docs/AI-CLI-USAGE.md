# AI CLI統合 使用ガイド

このドキュメントは、Minecraftコマンドサイトプロジェクトで使用するAI CLI統合の使い方を説明します。

## アーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                      ワークスペース                           │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │ Claude Code │  │  Codex CLI  │  │ Gemini CLI  │         │
│  │  (メイン)   │  │  (補助)     │  │  (補助)     │         │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘         │
│         │                │                │                 │
│         ▼                ▼                ▼                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              統合設定 (.claude/settings.json)        │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## 利用可能なスキル（スラッシュコマンド）

### AI CLI連携

| スキル | 説明 | 使用例 |
|--------|------|--------|
| `/codex` | Codex CLIでタスク実行 | `/codex giveコマンドジェネレーターを実装` |
| `/gemini` | Gemini CLIでタスク実行 | `/gemini コマンド解説を生成` |

### ページ評価

| スキル | 説明 | 使用例 |
|--------|------|--------|
| `/evaluate` | 技術的評価（SEO、明確さ等） | `/evaluate index.html` |
| `/persona` | ペルソナ視点での評価 | `/persona index.html` |
| `/review` | 統合レビュー（両方を実行） | `/review index.html` |

## 評価スキルの詳細

### /evaluate（技術的評価）

**評価基準（各25点、合計100点）:**
1. SEO評価
2. 事業内容の明確さ
3. 分かりやすさ
4. サービス申込意欲

**合格ライン:** 90点以上

### /persona（ペルソナ評価）

**評価基準（共感35点、通いたい度35点、利用意欲30点）:**

3つのペルソナで評価：
- 初心者マインクラフター（太郎くん・12歳）
- 中級プレイヤー（花子さん・16歳）
- 上級者・配布者（けんじさん・24歳）

**合格ライン:** 全ペルソナ平均90点以上

### /review（統合レビュー）

`/evaluate` と `/persona` を統合実行し、総合スコアを算出。

**オプション:**
```bash
/review --auto-fix index.html  # 合格点（90点）まで自動改善
/review --quick index.html     # スコアのみ表示
```

## 使用フロー

### サイト開発時

```
1. ページを作成
   ↓
2. /review でチェック
   ↓
3. 不合格（90点未満）の場合
   ↓
4. /codex または /gemini で修正
   ↓
5. 再度 /review
   ↓
6. 90点以上になるまで繰り返し
```

### 自動改善モード

```bash
/review --auto-fix index.html
```

このコマンドで、合格点（90点）に達するまで自動で改善を繰り返します。

## サブスクリプション情報

| AI | サブスク | 月額 | モデル |
|----|---------|------|--------|
| Claude Code | Max | $200 | Claude Opus 4.5 |
| Codex CLI | ChatGPT Plus | $20 | GPT-5.2 Codex |
| Gemini CLI | Gemini AI Pro | $19.99 | Gemini 3 Pro Preview |

**合計: 約$240/月（APIキー不要）**

## 使用量上限に関する注意

**重要:** 使用量上限に達した場合：
1. 即座に報告
2. 該当CLIの使用を停止
3. 代替CLIを提案

これは追加課金を防ぐためのルールです。

## セットアップ確認

```bash
node scripts/setup.js
```

このコマンドで、すべてのCLIと設定ファイルが正しくセットアップされているか確認できます。

## トラブルシューティング

### Codex CLI

| エラー | 解決方法 |
|--------|---------|
| `codex: command not found` | `npm install -g @openai/codex` |
| `Not logged in` | `codex --login` |
| `Rate limit exceeded` | 少し待ってから再試行 |

### Gemini CLI

| エラー | 解決方法 |
|--------|---------|
| `gemini: command not found` | `npm install -g @google/gemini-cli` |
| `ModelNotFoundError` | モデル名を確認 |
| Gemini 3でエラー | 自動フォールバックで2.5に切り替わる |

## 関連ドキュメント

- [スクリプトREADME](../scripts/README.md)
- [CODEX.md](../CODEX.md)
- [GEMINI.md](../GEMINI.md)
